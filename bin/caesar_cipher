#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)

require 'caesar_cipher'
require 'sinatra'
require 'sinatra/reloader'

#ptext = ARGV[0]
#cipher = ARGV[1].to_i
#
#puts caesar_cipher(ptext, cipher)

configure do
  set(:views) { File.expand_path('../../views/', __FILE__) }
end

get "/" do
  plain_text = params['plain_text']
  cipher = params['cipher'].to_i

  cipher_text = ''
  unless plain_text == nil || cipher == nil
    cipher_text = caesar_cipher(plain_text, cipher)
  end
  
  erb :index, :locals => {cipher_text: cipher_text}
end
